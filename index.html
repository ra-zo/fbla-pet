<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Pet - Care & Budget Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/sonner@2.0.7/dist/sonner.css">
    <link rel="icon" href="transparentcorgi.png" type="image/png" sizes="32x32" />
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1>ğŸ¾ Virtual Pet Care Simulator</h1>
                    <p class="subtitle">Learn about pet ownership and financial responsibility!</p>
                </div>
                <button id="helpBtn" class="help-btn hidden" title="Help & Guide">â“ Help</button>
            </div>
        </header>

        <!-- Pet Setup Modal -->
        <div id="setupModal" class="modal">
            <div class="modal-content">
                <h2>Create Your Pet</h2>
                <div class="form-group">
                    <label for="petName">Pet Name:</label>
                    <input type="text" id="petName" placeholder="Enter pet name" maxlength="20">
                </div>
                <div class="form-group">
                    <label for="petType">Pet Type:</label>
                    <select id="petType">
                        <option value="dog">ğŸ• Dog</option>
                        <option value="cat">ğŸ± Cat</option>
                        <option value="rabbit">ğŸ° Rabbit</option>
                        <option value="bird">ğŸ¦ Bird</option>
                        <option value="hamster">ğŸ¹ Hamster</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="startingBudget">Starting Budget ($):</label>
                    <input type="number" id="startingBudget" value="100" min="50" max="500">
                </div>
                <button id="createPetBtn" class="btn btn-primary">Create Pet</button>
            </div>
        </div>

        <!-- Main Game Area -->
        <div id="gameArea" class="game-area hidden">
            <!-- Pet Display and Stats Section -->
            <div class="pet-stats-section">
                <div class="pet-stats-main">
                    <!-- Pet Display (Left) -->
                    <div class="pet-display-container">
                        <div class="pet-video-wrapper">
                            <img id="petImage" src="transparentcorgi.png" alt="Pet" class="pet-image">
                        </div>
                        <div id="petNameDisplay" class="pet-name">
                            <span id="petNameText"></span>
                        </div>
                        <div id="petMood" class="pet-mood"></div>
                    </div>

                    <!-- Pet Stats (Right) -->
                    <div class="stats-container">
                        <h3 class="stats-title"><span class="stats-emoji">ğŸ“Š</span> <span class="stats-text">Stats</span></h3>
                        <div class="stats-list">
                            <div class="stat-item">
                                <div class="stat-header">
                                    <span class="stat-label">ğŸ½ï¸ Hunger</span>
                                    <span id="hungerValue" class="stat-value">100</span>
                                </div>
                                <div class="stat-bar-container">
                                    <div id="hungerBar" class="stat-bar-fill"></div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-header">
                                    <span class="stat-label">ğŸ˜Š Happiness</span>
                                    <span id="happinessValue" class="stat-value">100</span>
                                </div>
                                <div class="stat-bar-container">
                                    <div id="happinessBar" class="stat-bar-fill"></div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-header">
                                    <span class="stat-label">âš¡ Energy</span>
                                    <span id="energyValue" class="stat-value">100</span>
                                </div>
                                <div class="stat-bar-container">
                                    <div id="energyBar" class="stat-bar-fill"></div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-header">
                                    <span class="stat-label">ğŸ’š Health</span>
                                    <span id="healthValue" class="stat-value">100</span>
                                </div>
                                <div class="stat-bar-container">
                                    <div id="healthBar" class="stat-bar-fill"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Action Buttons (Under Stats) -->
                        <div class="actions-inline">
                            <h3 class="actions-title">ğŸ® Take Action</h3>
                            <div class="actions-grid">
                                <button id="feedBtn" class="action-btn action-feed">
                                    <span class="action-emoji">ğŸ½ï¸</span>
                                    <div class="action-content">
                                        <span class="action-name">Feed</span>
                                        <span class="action-cost">$5</span>
                                    </div>
                                </button>
                                <button id="playBtn" class="action-btn action-play">
                                    <span class="action-emoji">ğŸ¾</span>
                                    <div class="action-content">
                                        <span class="action-name">Play</span>
                                        <span class="action-cost">$3</span>
                                    </div>
                                </button>
                                <button id="restBtn" class="action-btn action-rest">
                                    <span class="action-emoji">ğŸ˜´</span>
                                    <div class="action-content">
                                        <span class="action-name">Rest</span>
                                        <span class="action-cost">Free</span>
                                    </div>
                                </button>
                                <button id="cleanBtn" class="action-btn action-clean">
                                    <span class="action-emoji">ğŸ›</span>
                                    <div class="action-content">
                                        <span class="action-name">Clean</span>
                                        <span class="action-cost">$4</span>
                                    </div>
                                </button>
                                <button id="healthCheckBtn" class="action-btn action-vet">
                                    <span class="action-emoji">ğŸ¥</span>
                                    <div class="action-content">
                                        <span class="action-name">Health Check</span>
                                        <span class="action-cost">$15</span>
                                    </div>
                                </button>
                                <button id="toyBtn" class="action-btn action-toy">
                                    <span class="action-emoji">ğŸ§¸</span>
                                    <div class="action-content">
                                        <span class="action-name">Toy</span>
                                        <span class="action-cost">$10</span>
                                    </div>
                                </button>
                            </div>
                            <div class="total-expenses">
                                <span class="expenses-label">ğŸ’° Total Expenses:</span>
                                <span id="totalExpensesDisplay" class="expenses-amount">$0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Earning, Savings, and Budget Section -->
            <div class="earning-savings-section">
                <div class="earning-section-compact">
                    <h3 class="earning-title"><span class="title-emoji">ğŸ’¼</span> <span class="title-text">Earn & Save</span></h3>
                    <div class="chores-grid-compact">
                        <button id="chore1Btn" class="chore-btn-compact">
                            <span class="chore-emoji">ğŸ“š</span>
                            <span class="chore-name-compact">Study</span>
                            <span class="chore-reward-compact">+$5</span>
                        </button>
                        <button id="chore2Btn" class="chore-btn-compact">
                            <span class="chore-emoji">ğŸ§¹</span>
                            <span class="chore-name-compact">Clean Room</span>
                            <span class="chore-reward-compact">+$8</span>
                        </button>
                        <button id="chore3Btn" class="chore-btn-compact">
                            <span class="chore-emoji">ğŸŒ±</span>
                            <span class="chore-name-compact">Water Plants</span>
                            <span class="chore-reward-compact">+$3</span>
                        </button>
                        <button id="chore4Btn" class="chore-btn-compact">
                            <span class="chore-emoji">ğŸ“</span>
                            <span class="chore-name-compact">Homework</span>
                            <span class="chore-reward-compact">+$6</span>
                        </button>
                    </div>
                    <div class="savings-inline">
                        <h4>Set a Savings Goal</h4>
                        <div class="savings-controls-compact">
                            <input type="number" id="goalAmount" placeholder="Goal amount ($)" min="10" step="10" class="goal-input">
                            <button id="setGoalBtn" class="btn btn-secondary btn-compact">Set Goal</button>
                        </div>
                        <div id="goalProgress" class="goal-progress-compact hidden">
                            <div class="progress-bar-compact">
                                <div id="goalProgressBar" class="progress-fill-compact"></div>
                            </div>
                            <div class="progress-text-compact">
                                <span id="goalProgressText">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="budget-container">
                    <h3 class="budget-title"><span class="title-emoji">ğŸ’°</span> <span class="title-text">Budget & Expenses</span></h3>
                    <div class="budget-grid">
                        <div class="budget-card-compact">
                            <div class="budget-label">Available</div>
                            <div id="availableBudget" class="budget-value budget-available">$100.00</div>
                        </div>
                        <div class="budget-card-compact">
                            <div class="budget-label">Total Spent</div>
                            <div id="totalSpent" class="budget-value budget-spent">$0.00</div>
                        </div>
                        <div class="budget-card-compact">
                            <div class="budget-label">Savings Goal</div>
                            <div id="savingsGoal" class="budget-value budget-goal">$0.00</div>
                        </div>
                    </div>
                    <div class="expense-breakdown-compact">
                        <h4>Recent Expenses</h4>
                        <div id="expenseList" class="expense-list-compact"></div>
                    </div>
                </div>
            </div>

            <!-- Financial Insights Section -->
            <div class="charts-section">
                <div class="chart-card">
                    <h3 class="chart-title"><span class="title-emoji">ğŸ“Š</span> <span class="title-text">Spending Breakdown</span></h3>
                    <p class="chart-caption">See how your pet budget is divided between food, vet visits, toys, and more.</p>
                    <canvas id="spendingChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title"><span class="title-emoji">ğŸ“ˆ</span> <span class="title-text">Budget Over Time</span></h3>
                    <p class="chart-caption">Track your available money as you earn from chores and spend on your pet.</p>
                    <canvas id="budgetChart"></canvas>
                </div>
            </div>

            <!-- Interactive Q&A and Tips Section -->
            <div class="qa-tips-section">
                <div class="qa-section-compact">
                    <h3 class="qa-title-compact"><span class="title-emoji">ğŸ’¡</span> <span class="title-text">Interactive Q&A</span></h3>
                    <p class="qa-description-compact">Test your knowledge about pet care and financial responsibility!</p>
                    <ul class="qa-learning-list">
                        <li>Understand how everyday choices affect your budget.</li>
                        <li>Learn when to spend, save, or visit the vet.</li>
                        <li>Practice planning ahead for your pet&rsquo;s needs.</li>
                    </ul>
                    <button id="startQABtn" class="btn btn-primary qa-btn-compact">Start Quiz</button>
                </div>
                
                        <div class="tips-section-compact">
                    <h3 class="tips-title-compact"><span class="title-emoji">âœ¨</span> <span class="title-text">Quick Tips</span></h3>
                    <div class="tips-list">
                        <div class="tip-item">
                            <span class="tip-icon">ğŸ½ï¸</span>
                            <span class="tip-text">Feed your pet regularly to keep hunger above 40%</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">ğŸ¾</span>
                            <span class="tip-text">Play when energy is above 20% for best results</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">ğŸ˜´</span>
                            <span class="tip-text">Rest is free! Use it to restore energy</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">ğŸ’°</span>
                            <span class="tip-text">Complete chores to earn money for pet care</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">ğŸ¥</span>
                            <span class="tip-text">Health checks are important when health drops below 30%</span>
                        </div>
                    </div>
                </div>
                
                <div id="qaModal" class="qa-modal hidden">
                    <div class="qa-modal-content">
                        <div class="qa-header">
                            <h3 id="qaQuestionNumber">Question 1 of 5</h3>
                            <button id="closeQABtn" class="qa-close-btn">Ã—</button>
                        </div>
                        <div class="qa-body">
                            <p id="qaQuestion" class="qa-question"></p>
                            <div id="qaOptions" class="qa-options"></div>
                            <div id="qaFeedback" class="qa-feedback hidden"></div>
                        </div>
                        <div class="qa-footer">
                            <div id="qaScore" class="qa-score">Score: 0/0</div>
                            <button id="qaNextBtn" class="btn btn-secondary hidden">Next Question</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
            
    </div>

    <!-- Sonner Toaster -->
    <div id="sonner-root"></div>

    <!-- Rename Pet Modal -->
    <div id="renameModal" class="rename-modal hidden">
        <div class="rename-modal-content">
            <div class="rename-header">
                <h3>Rename Your Pet</h3>
                <button id="closeRenameBtn" class="rename-close-btn">Ã—</button>
            </div>
            <div class="rename-body">
                <label for="renameInput" class="rename-label">New name</label>
                <input type="text" id="renameInput" class="rename-input" maxlength="20" placeholder="Enter a fun pet name">
                <p class="rename-hint">Tip: Choose a name that matches your pet&rsquo;s personality!</p>
            </div>
            <div class="rename-footer">
                <button id="cancelRenameBtn" class="btn btn-secondary btn-compact">Cancel</button>
                <button id="saveRenameBtn" class="btn btn-primary btn-compact">Save Name</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="help-modal hidden">
        <div class="help-modal-content">
            <div class="help-header">
                <h2>ğŸ“š Help & Guide</h2>
                <button id="closeHelpBtn" class="help-close-btn">Ã—</button>
            </div>
            <div class="help-body">
                <div class="help-section">
                    <h3>ğŸ® Getting Started</h3>
                    <p>Welcome to the Virtual Pet Care Simulator! This game teaches you about pet ownership and financial responsibility.</p>
                    <ul>
                        <li><strong>Create Your Pet:</strong> Choose a name, type, and starting budget ($50-$500)</li>
                        <li><strong>Monitor Stats:</strong> Keep an eye on Hunger, Happiness, Health, and Energy</li>
                        <li><strong>Manage Budget:</strong> Balance spending on pet care with earning money through chores</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>ğŸ¾ Pet Care Actions</h3>
                    <div class="help-action-list">
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ½ï¸</span>
                            <div>
                                <strong>Feed</strong> - $5.00<br>
                                <small>Increases Hunger +30, Happiness +5</small>
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ¾</span>
                            <div>
                                <strong>Play</strong> - $3.00<br>
                                <small>Increases Happiness +25, decreases Energy -15</small>
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ˜´</span>
                            <div>
                                <strong>Rest</strong> - Free<br>
                                <small>Increases Energy +40, Health +5</small>
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ›</span>
                            <div>
                                <strong>Clean</strong> - $4.00<br>
                                <small>Increases Health +15, Happiness +10</small>
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ¥</span>
                            <div>
                                <strong>Health Check</strong> - $15.00<br>
                                <small>Increases Health +30 (important when health is low!)</small>
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ§¸</span>
                            <div>
                                <strong>Buy Toy</strong> - $10.00<br>
                                <small>Increases Happiness +20</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="help-section">
                    <h3>ğŸ’¼ Earning Money</h3>
                    <p>Complete chores to earn money for pet care:</p>
                    <div class="help-action-list">
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ“š</span>
                            <div>
                                <strong>Study</strong> - Earn $5.00
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ§¹</span>
                            <div>
                                <strong>Clean Room</strong> - Earn $8.00
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸŒ±</span>
                            <div>
                                <strong>Water Plants</strong> - Earn $3.00
                            </div>
                        </div>
                        <div class="help-action-item">
                            <span class="help-icon">ğŸ“</span>
                            <div>
                                <strong>Homework</strong> - Earn $6.00
                            </div>
                        </div>
                    </div>
                </div>

                <div class="help-section">
                    <h3>ğŸ¯ Savings Goals</h3>
                    <p>Set savings goals to track your progress and learn financial planning:</p>
                    <ul>
                        <li>Enter a goal amount (minimum $10)</li>
                        <li>Watch your progress bar fill as you save</li>
                        <li>Reach your goal to practice good financial habits!</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>ğŸ’¡ Interactive Q&A</h3>
                    <p>Test your knowledge and earn rewards:</p>
                    <ul>
                        <li>Answer 5 random questions about pet care and finances</li>
                        <li>Earn $5.00 + stat boost for each correct answer</li>
                        <li>Get bonus rewards based on your final score:
                            <ul>
                                <li>100%: $15.00 + happiness boost</li>
                                <li>80%+: $10.00 + happiness boost</li>
                                <li>60%+: $5.00</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>ğŸ’¡ Tips & Tricks</h3>
                    <ul>
                        <li><strong>Stats Decay:</strong> Pet stats decrease over time, so check regularly!</li>
                        <li><strong>Low Health:</strong> If health drops below 30%, take your pet for a health check</li>
                        <li><strong>Free Rest:</strong> Use the free Rest action to restore energy without spending</li>
                        <li><strong>Balance:</strong> Balance earning money with spending on pet care</li>
                        <li><strong>Mood Indicators:</strong> Watch your pet's mood to understand their needs</li>
                        <li><strong>Expense Tracking:</strong> Review your expense list to see where money goes</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>ğŸ“Š Understanding Stats</h3>
                    <ul>
                        <li><strong>Hunger:</strong> Feed regularly to keep it above 40%</li>
                        <li><strong>Happiness:</strong> Play and interact to keep your pet happy</li>
                        <li><strong>Health:</strong> Keep clean and get regular check-ups</li>
                        <li><strong>Energy:</strong> Let your pet rest when energy is low</li>
                    </ul>
                    <p><em>Note: Low stats in one area can affect others, so maintain balance!</em></p>
                </div>
            </div>
            <div class="help-footer">
                <button id="closeHelpBtn2" class="btn btn-primary">Got it!</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/sonner@2.0.7/dist/sonner.umd.js"></script>
    <script>
        // Initialize Sonner for vanilla JS
        // Sonner requires React, so we'll use a vanilla JS compatible approach
        // Using a simple toast implementation that mimics Sonner's API
        (function() {
            // Create toast container if it doesn't exist
            let toastContainer = document.getElementById('sonner-root');
            if (!toastContainer) {
                toastContainer = document.createElement('div');
                toastContainer.id = 'sonner-root';
                document.body.appendChild(toastContainer);
            }
            
            // Simple toast implementation compatible with Sonner API
            window.toast = {
                success: function(message, options) {
                    showSonnerToast(message, 'success', options);
                },
                error: function(message, options) {
                    showSonnerToast(message, 'error', options);
                },
                info: function(message, options) {
                    showSonnerToast(message, 'info', options);
                },
                warning: function(message, options) {
                    showSonnerToast(message, 'warning', options);
                }
            };
            
            let toastCount = 0;
            const toastStack = [];
            
            function showSonnerToast(message, type, options) {
                const duration = (options && options.duration) || 5000;
                const toastId = `toast-${Date.now()}-${toastCount++}`;
                
                const toast = document.createElement('div');
                toast.id = toastId;
                toast.className = `sonner-toast sonner-toast-${type}`;
                
                // Create toast content
                const toastContent = document.createElement('div');
                toastContent.className = 'sonner-toast-content';
                
                // Add icon based on type
                const icons = {
                    success: 'âœ“',
                    error: 'âœ•',
                    info: 'â„¹',
                    warning: 'âš '
                };
                
                const icon = document.createElement('span');
                icon.className = 'sonner-toast-icon';
                icon.textContent = icons[type] || icons.info;
                
                const messageEl = document.createElement('span');
                messageEl.className = 'sonner-toast-message';
                messageEl.textContent = message;
                
                toastContent.appendChild(icon);
                toastContent.appendChild(messageEl);
                toast.appendChild(toastContent);
                
                // Add styles
                Object.assign(toast.style, {
                    position: 'fixed',
                    right: '20px',
                    padding: '0',
                    borderRadius: '8px',
                    backgroundColor: 'white',
                    color: '#1f2937',
                    fontWeight: '500',
                    zIndex: '10000',
                    boxShadow: '0 10px 38px -10px rgba(22, 23, 24, 0.35), 0 10px 20px -15px rgba(22, 23, 24, 0.2)',
                    animation: 'slideIn 0.3s ease-out',
                    maxWidth: '356px',
                    minWidth: '300px',
                    wordWrap: 'break-word',
                    border: '1px solid #e5e7eb',
                    overflow: 'hidden'
                });
                
                // Set border color based on type
                const borderColors = {
                    success: '#10b981',
                    error: '#ef4444',
                    info: '#3b82f6',
                    warning: '#f59e0b'
                };
                toast.style.borderLeft = `4px solid ${borderColors[type] || borderColors.info}`;
                
                // Position toast (stack them)
                const topOffset = 20 + (toastStack.length * 80);
                toast.style.top = `${topOffset}px`;
                
                toastStack.push(toastId);
                
                // Style the content
                Object.assign(toastContent.style, {
                    display: 'flex',
                    alignItems: 'center',
                    gap: '12px',
                    padding: '16px'
                });
                
                // Style the icon
                Object.assign(icon.style, {
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    width: '20px',
                    height: '20px',
                    borderRadius: '50%',
                    fontSize: '14px',
                    fontWeight: 'bold',
                    flexShrink: '0'
                });
                
                const iconColors = {
                    success: { bg: '#d1fae5', color: '#10b981' },
                    error: { bg: '#fee2e2', color: '#ef4444' },
                    info: { bg: '#dbeafe', color: '#3b82f6' },
                    warning: { bg: '#fef3c7', color: '#f59e0b' }
                };
                const iconStyle = iconColors[type] || iconColors.info;
                icon.style.backgroundColor = iconStyle.bg;
                icon.style.color = iconStyle.color;
                
                // Style the message
                Object.assign(messageEl.style, {
                    flex: '1',
                    fontSize: '14px',
                    lineHeight: '1.5'
                });
                
                const container = document.getElementById('sonner-root') || document.body;
                container.appendChild(toast);
                
                // Remove after duration
                const timeoutId = setTimeout(() => {
                    removeToast(toastId);
                }, duration);
                
                // Allow click to dismiss
                toast.addEventListener('click', () => {
                    clearTimeout(timeoutId);
                    removeToast(toastId);
                });
            }
            
            function removeToast(toastId) {
                const toast = document.getElementById(toastId);
                if (toast) {
                    toast.style.animation = 'slideOut 0.3s ease-in';
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                        // Remove from stack and reposition others
                        const index = toastStack.indexOf(toastId);
                        if (index > -1) {
                            toastStack.splice(index, 1);
                        }
                        repositionToasts();
                    }, 300);
                }
            }
            
            function repositionToasts() {
                const toasts = document.querySelectorAll('.sonner-toast');
                toasts.forEach((toast, index) => {
                    toast.style.top = `${20 + (index * 80)}px`;
                });
            }
            
            // Add CSS animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                @keyframes slideOut {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js"></script>
    <script src="app.js"></script>
    <script src="pet.js"></script>

</body>
</html>
